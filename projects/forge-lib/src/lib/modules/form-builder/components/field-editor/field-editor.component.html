<div flex-container>
  <div m-r-10>
    <mat-tab-group>
      <mat-tab label="Display" p-t-15>
        <div *ngIf="showAbstractDisplay">
          <div sws-form input-active full-width>
            <input [(ngModel)]="this.field.display.label" sws-form__input type="'text'" [name]="'label_input'"
              onkeyup="this.setAttribute('value', this.value);">
            <label sws-form__label [for]="'label_input'">Label</label>
          </div>
          <div sws-checkbox>
            <input id="hide_label" [(ngModel)]="this.field.display.hideLabel" type="checkbox" checked="unchecked" />
            <label for="hide_label">Hide label</label>
          </div>
          <div sws-textarea>
            <textarea [(ngModel)]="this.field.display.tooltip" name="tooltip" id="tooltip" rows="4"
              cols="50"></textarea>
            <label sws-textarea__label for="tooltip">Tooltip</label>
          </div>
          <div sws-checkbox>
            <input id="disabled" [(ngModel)]="this.field.display.disabled" type="checkbox" checked="unchecked" />
            <label for="disabled">Disabled</label>
          </div>
          <div sws-checkbox>
            <input id="hidden" [(ngModel)]="this.field.display.hidden" type="checkbox" checked="unchecked" />
            <label for="hidden">Hidden</label>
          </div>
        </div>
        <ng-container #vcDisplay></ng-container>
      </mat-tab>
      <mat-tab label="Data" p-t-15>
        <div *ngIf="showAbstractData">
          <div sws-form input-active full-width>
            <input [(ngModel)]="this.field.data.defaultValue" sws-form__input type="'text'"
              [name]="'label_default_value'" onkeyup="this.setAttribute('value', this.value);">
            <label sws-form__label [for]="'label_default_value'">Default Value</label>
          </div>
        </div>
        <ng-container #vcData></ng-container>
      </mat-tab>
      <mat-tab label="Validation" p-t-15>
        <div *ngIf="showAbstractValidation">
          <div sws-checkbox>
            <input id="data_required" [(ngModel)]="this.field.validation.required" type="checkbox"
              checked="unchecked" />
            <label for="data_required">Required?</label>
          </div>
          <div sws-form input-active full-width>
            <input [(ngModel)]="this.field.validation.customErrorMessage" sws-form__input type="'text'"
              [name]="'data_custom_error_message'" onkeyup="this.setAttribute('value', this.value);">
            <label sws-form__label [for]="'data_custom_error_message'">Custom Error Message</label>
          </div>
        </div>
        <ng-container #vcValidation></ng-container>
      </mat-tab>
      <mat-tab label="Api" p-t-15>
        <div sws-form input-active full-width>
          <input [(ngModel)]="this.field.api.accountName" sws-form__input type="'text'" [name]="'api_account_name'"
            onkeyup="this.setAttribute('value', this.value);" disabled>
          <label sws-form__label [for]="'api_account_name'">{{this.formsService.formBuilderConfig.accountName}}</label>
        </div>
        <div full-width>
          <div sws-select--primary>
            <select id="this.field.api.entityTemplateName" [(ngModel)]="this.field.api.entityTemplateName"
              onclick="this.setAttribute('value', this.value);" (change)="selectEntityTemplate()">
              <option selected disabled>Select an Entity</option>
              <option *ngFor="let entity of this.formsService.entities" (value)="entity.name">{{entity.name}}</option>
            </select>
          </div>
        </div>
        <div full-width>
          <div *ngIf="this.selectedEntity && this.field.type != 'Attachment'" sws-select--primary>
            <select id="this.field.api.entityProfileName" [(ngModel)]="this.field.api.profileName"
              onclick="this.setAttribute('value', this.value);" (change)="selectEntityProfile()">
              <option selected disabled>Select a Profile</option>
              <option *ngFor="let profile of this.selectedEntity.profiles" (value)="profile.name">{{profile.name}}
              </option>
            </select>
          </div>
        </div>
        <div full-width>
          <div *ngIf="this.selectedProfile && this.field.type != 'Attachment'" sws-select--primary>
            <select id="this.field.api.entityFieldName" [(ngModel)]="this.field.api.fieldName"
              onclick="this.setAttribute('value', this.value);" (blur)="selectEntityField()">
              <option selected disabled>Select a Field</option>
              <option *ngFor="let field of this.selectedProfile.fields" (value)="field.name">{{field.name}}</option>
            </select>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Conditional">
        <div *ngIf="showAbstractData">
          <div p-t-30>
            <div sws-select--jet>
              <select id="conditional_type" [(ngModel)]="this.field.conditional.type"
                onclick="this.setAttribute('value', this.value);">
                <option selected disabled>Select a Conditional Type</option>
                <option *ngFor="let type of this.conditionalTypes" [value]="type">{{type}}</option>
              </select>
              <label for="conditional_type">Conditional Type</label>
            </div>
          </div>
          <hr>
          <div *ngIf="this.field.conditional.type == 'simple'">
            <div *ngFor="let condition of this.field.conditional.simpleConditionals; index as i">
              <h5 style="margin: 0px;">Condition {{i}}</h5>
              <div p-t-30>
                <div sws-select--jet>
                  <select id="compare_component"
                    [(ngModel)]="this.field.conditional.simpleConditionals[i].compareComponentId"
                    onclick="this.setAttribute('value', this.value);" (change)="selectCompareComponent(i)">
                    <option selected disabled>Select a Compare Component</option>
                    <ng-container *ngFor="let formField of formFields">
                      <option [value]="formField.id" *ngIf="this.field !== formField">{{formField.display.label}}
                        ({{formField.id}})</option>
                    </ng-container>
                  </select>
                  <label for="compare_component">Compare Component</label>
                </div>
              </div>
              <div p-t-30>
                <div *ngIf="this.field.conditional.simpleConditionals[i].compareComponentId" sws-select--jet>
                  <select id="comparison_type" [(ngModel)]="this.field.conditional.simpleConditionals[i].comparisonType"
                    onclick="this.setAttribute('value', this.value);">
                    <option selected disabled>Select a Comparison Type</option>
                    <option *ngFor="let type of this.comparisonTypes" [value]="type">{{type}}</option>
                  </select>
                  <label for="comparison_type">Comparison Type</label>
                </div>
              </div>
              <div *ngIf="this.field.conditional.simpleConditionals[i].comparisonType">
                <div flex-container-row>
                  <div
                    *ngIf="!this.field.conditional.simpleConditionals[i].comparisonComponentId || this.field.conditional.simpleConditionals[i].comparisonComponentId === 'Select a Comparison Component'"
                    sws-form input-active form-md>
                    <input [(ngModel)]="this.field.conditional.simpleConditionals[i].comparisonValue" sws-form__input
                      type="'text'" [name]="'comparison_value'" onkeyup="this.setAttribute('value', this.value);">
                    <label sws-form__label [for]="'comparison_value'">Comparison Value</label>
                  </div>
                  <div sws-tooltip-left--light m-t-20>
                    <div sws-icon-flat--secondary rounded>
                      <i class="fas fa-lightbulb"></i>
                    </div>
                    <div sws-tooltip--text>
                      <p> Please enter appropriate value type. For examples, number (-2, 19.8), string (john, sarah),
                        datetime (07/04/2019, 12/25/1970), boolean (true, false).</p>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="!this.field.conditional.simpleConditionals[i].comparisonValue || this.field.conditional.simpleConditionals[i].comparisonValue === ''"
                  p-t-30>
                  <div sws-select--jet>
                    <select id="comparison_component"
                      [(ngModel)]="this.field.conditional.simpleConditionals[i].comparisonComponentId"
                      onclick="this.setAttribute('value', this.value);">
                      <option selected>Select a Comparison Component</option>
                      <ng-container *ngFor="let formField of comparisonFields">
                        <option [value]="formField.id"
                          *ngIf="this.field !== formField && this.field.conditional.simpleConditionals[i].compareComponentId !== formField.id">
                          {{formField.display.label}}
                          ({{formField.id}})</option>
                      </ng-container>
                    </select>
                    <label for="comparison_component">Comparison Component</label>
                  </div>
                </div>
              </div>
              <div p-t-30>
                <div
                  *ngIf="this.field.conditional.simpleConditionals[i].comparisonValue || this.field.conditional.simpleConditionals[i].comparisonComponentId"
                  sws-select--jet>
                  <select id="action_type" [(ngModel)]="this.field.conditional.simpleConditionals[i].action"
                    onclick="this.setAttribute('value', this.value);">
                    <option selected disabled>Select an Action Type</option>
                    <option *ngFor="let type of this.actionTypes" [value]="type">{{type}}</option>
                  </select>
                  <label for="action_type">Action Type</label>
                </div>
              </div>
              <hr>
            </div>
            <button sws-button--primary (click)="createConditional()">Create Conditional</button>
          </div>
          <div *ngIf="this.field.conditional.type == 'advanced'">
            <div flex-container-column full-width border-box>
              <div sws-textarea>
                <textarea [(ngModel)]="this.field.conditional.advancedConditional" name="exampleform2"
                  id="conditional_advanced_conditional" rows="4" cols="50"
                  onkeyup="this.setAttribute('value', this.value);"
                  placeholder="if(data['Text Area 1'] == 'john')"></textarea>
                <label sws-textarea__label for="conditional_advanced_conditional">Advanced Conditional</label>
              </div>
            </div>
          </div>
          <button sws-button--success (click)="generateConditional()">Save Conditional</button>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>